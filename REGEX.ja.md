# ze 正規表現構文

[English](REGEX.md)

zeは検索（`C-s`, `C-r`）と置換（`M-%`）で使える簡易正規表現エンジンを内蔵しています。

## サポートする構文

### 基本パターン

| パターン | 説明 | 例 |
|----------|------|-----|
| `.` | 任意の1文字（改行以外） | `a.c` は "abc", "a1c" にマッチ |
| `*` | 0回以上の繰り返し（貪欲） | `ab*c` は "ac", "abc", "abbc" にマッチ |
| `+` | 1回以上の繰り返し（貪欲） | `ab+c` は "abc", "abbc" にマッチ（"ac"は不可） |
| `?` | 0回または1回 | `colou?r` は "color", "colour" にマッチ |

### アンカー

| パターン | 説明 | 例 |
|----------|------|-----|
| `^` | 行頭 | `^TODO` は行頭の "TODO" にマッチ |
| `$` | 行末 | `;$` は行末の ";" にマッチ |

### 文字クラス

| パターン | 説明 | 例 |
|----------|------|-----|
| `[abc]` | a, b, c のいずれか | `[aeiou]` は母音にマッチ |
| `[^abc]` | a, b, c 以外 | `[^0-9]` は数字以外にマッチ |
| `[a-z]` | a から z の範囲 | `[A-Za-z]` はアルファベットにマッチ |
| `[a-zA-Z0-9]` | 複数範囲 | 英数字 |

### エスケープシーケンス

| パターン | 説明 | 相当 |
|----------|------|------|
| `\d` | 数字 | `[0-9]` |
| `\D` | 数字以外 | `[^0-9]` |
| `\w` | 単語構成文字 | `[a-zA-Z0-9_]` |
| `\W` | 単語構成文字以外 | `[^a-zA-Z0-9_]` |
| `\s` | 空白文字 | `[ \t\n\r]` |
| `\S` | 空白以外 | `[^ \t\n\r]` |
| `\n` | 改行 | |
| `\r` | キャリッジリターン | |
| `\t` | タブ | |
| `\\` | バックスラッシュ | |

### 特殊文字のエスケープ

リテラルとしてマッチさせるには `\` でエスケープ：

```
\.    "." にマッチ
\*    "*" にマッチ
\+    "+" にマッチ
\?    "?" にマッチ
\[    "[" にマッチ
\^    "^" にマッチ
\$    "$" にマッチ
```

## 使用例

| パターン | マッチ対象 |
|----------|-----------|
| `\d+` | 1桁以上の数字: "123", "42" |
| `^TODO` | 行頭の "TODO" |
| `[A-Z][a-z]+` | 先頭大文字の単語: "Hello", "World" |
| `\w+@\w+\.\w+` | 簡易メールパターン |
| `^$` | 空行 |
| `\s+$` | 行末の空白 |
| `//.*$` | C言語スタイルの行コメント |
| `"[^"]*"` | ダブルクォート文字列 |

## 非サポート機能

以下の高度な正規表現機能は**サポートしていません**：

- `()` キャプチャグループ
- `\1` 後方参照
- `(?=)` 先読み
- `(?<=)` 後読み
- `|` 選択（複数回検索で代用）
- `*?`, `+?` 非貪欲量指定子
- `\b` 単語境界
- `{n,m}` 回数指定の繰り返し

## Tips

1. **リテラル検索**: 特殊文字を含まないパターンは単純な文字列検索として扱われます（高速）。

2. **大文字小文字の区別**: すべての検索は大文字小文字を区別します。区別しない検索には `[Tt]odo` のような文字クラスを使用。

3. **貪欲マッチ**: `*` と `+` は貪欲（できるだけ長くマッチ）。例えば `".*"` は `"a" and "b"` 全体にマッチし、`"a"` だけではない。

4. **行指向**: `^` と `$` は行の境界にマッチ（バッファの先頭/末尾だけでなく）。
