# ze キーバインド一覧

[English](KEYBINDINGS.md)

`C-` = Ctrl, `M-` = Alt/Option

## 移動

| キー | 動作 |
|------|------|
| `C-f` / `C-b` | 1文字 前進/後退 |
| `C-n` / `C-p` | 次行/前行 |
| `C-a` / `C-e` | 行頭/行末 |
| `M-f` / `M-b` | 単語単位で前進/後退 |
| `C-v` / `M-v` | ページダウン/アップ |
| `M-<` / `M->` | バッファ先頭/末尾 |
| `C-l` | カーソル行を画面中央に |

## 編集

| キー | 動作 |
|------|------|
| `C-d` | 1文字削除 |
| `M-d` | 単語削除 |
| `C-k` | 行末まで削除 |
| `C-Space` | マーク設定/解除（範囲選択開始/解除） |
| `C-w` / `M-w` | カット/コピー |
| `C-y` | ペースト |
| `C-u` / `C-/` | Undo/Redo |
| `M-^` | 行を上の行と結合 |
| `M-↑` / `M-↓` | 行を上/下に移動 |
| `Tab` / `S-Tab` | インデント/アンインデント |
| `M-;` | コメント切り替え |

## ファイル

| キー | 動作 |
|------|------|
| `C-x C-f` | ファイルを開く |
| `C-x C-s` | 保存 |
| `C-x C-w` | 名前を付けて保存 |
| `C-x C-c` | 終了 |

## 検索・置換

| キー | 動作 |
|------|------|
| `C-s` / `C-r` | 前方/後方検索 |
| `C-p` / `C-n` | 前/次の検索履歴（検索モード中） |
| `M-%` | 対話的置換 (y/n/!/q) |

正規表現も使えます: `\d+` で数字、`^TODO` で行頭のTODO。

## ウィンドウ・バッファ

| キー | 動作 |
|------|------|
| `C-x 2` | 横分割 |
| `C-x 3` | 縦分割 |
| `C-x o` | 次のウィンドウへ |
| `C-x 0` / `C-x 1` | ウィンドウを閉じる/他を閉じる |
| `C-x b` | バッファ切り替え |
| `C-x C-b` | バッファ一覧 |
| `C-x k` | バッファを閉じる |

## シェル統合

| キー | 動作 |
|------|------|
| `M-\|` | シェルコマンドにパイプ |
| `C-p` / `C-n` | 前/次のコマンド履歴 |
| `C-g` | キャンセル |

### 構文

```
[入力元] | コマンド [出力先]
```

**入力元:**
- (なし): 選択範囲
- `%`: バッファ全体
- `.`: 現在行

**出力先:**
- (なし): コマンドバッファに表示
- `>`: 入力元を置換（選択なしならカーソル位置に挿入）
- `+>`: カーソル位置に挿入
- `n>`: 新規バッファ

### 例

```bash
| date +>              # 日付をカーソル位置に挿入
| sort >               # 選択範囲をソートして置換
% | jq . >             # JSON全体を整形
. | sh >               # 現在行をシェル実行
% | grep TODO n>       # TODO行を新規バッファに抽出
```

## キーボードマクロ

| キー | 動作 |
|------|------|
| `C-x (` | マクロ記録開始 |
| `C-x )` | マクロ記録終了 |
| `C-x e` | 最後のマクロを実行 |
| `e` | マクロを再実行（`C-x e`の後） |
| `C-g` | 記録をキャンセル |

キー操作を記録して再生できます。`C-x e`の後は`e`を連打するだけで繰り返し実行できます。

## M-x コマンド

| コマンド | 動作 |
|----------|------|
| `line N` | N行目へジャンプ |
| `tab` / `tab N` | タブ幅表示/設定 |
| `indent` | インデントスタイル表示/設定 |
| `mode` / `mode X` | 言語モード表示/設定 |
| `key` | キーバインド説明 |
| `revert` | ファイル再読み込み |
| `ro` | 読み取り専用切り替え |
| `?` | コマンド一覧 |

## その他

| キー | 動作 |
|------|------|
| `M-?` | ヘルプを表示 |
| `C-g` | 現在の操作をキャンセル |
| `Escape` | キャンセル / プロンプトを閉じる |

## データファイル

zeは履歴を `~/.ze/` に保存します:

- `shell_history` — M-| コマンド履歴
- `search_history` — C-s/C-r 検索履歴
